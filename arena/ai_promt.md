**Описание входа (Input)**
- **t**: number — текущее время игры в секундах.
- **seed**: number — seed симуляции (воспроизводимость).

- **me**: объект, информация про твою машину (ВО ВСЕХ СВОЙСТВАХ — мировые координаты)
  - `me.pos` — {x, y} позиция в мировых единицах (координаты относительно глобальной карты, 0,0 — верхний левый).
  - `me.vel` — {x, y} вектор скорости в мировых единицах/сек.
  - `me.ang` — угол ориентации в радианах (0 = вправо, угол положителен, y растёт вниз).
  - `me.hp` — здоровье (0..100).
  - `me.shootCd` — оставшееся время перезарядки пушки (в секундах).

- ВАЖНО: почти всё остальное в `input` возвращается в ЛОКАЛЬНЫХ координатах относительно машины `me` (local frame):
  - локальная система: x = вперёд машины (в направлении `me.ang`), y = вправо от машины. Это значит, что в локальных векторах `x>0` — объект впереди, `y>0` — объект справа.

- **enemy** (локальные координаты)
  - `enemy.relPos` — {x, y} в локальных координатах (enemy.pos - me.pos, затем повернуто в систему машины). `x` — вперёд, `y` — вправо.
  - `enemy.hp` — здоровье врага (0..100).

- **vision**: массив лучей (LIDAR-like), длина по умолчанию 9.
  - Каждый элемент: `{ angle: number, hit: string|null, dist: number, hitPosLocal?: {x,y} }`.
    - `angle` — относительный угол луча относительно `me.ang` (радианы). Примерный набор: [-1.2,-0.8,-0.4,-0.2,0,0.2,0.4,0.8,1.2].
      - Этот `angle` уже локальный (относительно машины).
    - `hit` — тип первого пересечённого объекта: `"wall" | "enemy" | "turret" | "finish" | null`.
    - `dist` — расстояние до первого столкновения (скаляр, в мировых единицах). Если `hit === null`, `dist` равен максимальной дальности (обычно 400).
    - `hitPosLocal` — дополнительное поле (если `hit !== null`): позиция точки попадания в локальных координатах ({x,y} с теми же осями: x вперед, y вправо).

- **finishRel**: {x,y} — вектор от `me.pos` до центра зоны финиша, но ПРЕДОСТАВЛЯЕТСЯ В ЛОКАЛЬНЫХ координатах (x вперед, y вправо).

- **sense**: вспомогательные сенсоры (локальные координаты)
  - `sense.bullets`: массив близких пуль (фильтр; расстояние < 260). Каждый элемент `{ rel: {x,y}, vel: {x,y}, owner: "turret"|"car", dmg: number }`, где `rel` и `vel` — в локальных координатах. `rel.x>0` означает пуля впереди.
  - `sense.turrets`: массив турелей в пределах обнаружения (Distance < 420). Каждый элемент `{ rel: {x,y} }` в локальных координатах.

- **rules**: параметры мира/машины (скаляры — глобальные константы)
  - `rules.maxSpeed` — максимальная скорость (360 единиц/сек).
  - `rules.carRadius` — радиус машины (14 единиц).
  - `rules.shootCooldown` — минимальный интервал между выстрелами (0.25 с).

**Координатная система и размер мира**
- Глобальная (world) система: координаты уровня и `me.pos`, `me.vel` даны в мировых единицах (как пиксели канваса). Начало (0,0) — верхний левый, X-> вправо, Y-> вниз.
- Локальная (local) система: для каждого автомобиля локальная система повёрнута так, что её X совпадает с направлением `me.ang` (вперед машины), а Y — вправо. Большинство полей (enemy, finishRel, sense.*, vision.hitPosLocal) предоставляются в этой локальной системе.

**Физика и игровые константы (важно знать для планирования действий)**
- Радиус машины: `14`.
- Максимальная скорость: `360` (units/s).
- Ускорение (в движке): `ACCEL = 520` (units/s^2).
- Тормоз (реверс): `BRAKE = 620` (units/s^2).
- Скорость поворота (TURN_RATE в applyAction): `3.2` rad/s (полный диапазон steer = -1..1 масштабируется этим коэффициентом).
- Пуля машины: скорость `520` units/s, урон `12`, TTL `1.4` с.
- Пуля турели: скорость `420` units/s, урон `8`, TTL `1.9` с.
- Турель стреляет, если цель в пределах ~520 единиц и её CD ~0.65±random.
- Трение применяется экспоненциально (в integr ateCar): скорость умножается на `Math.pow(0.12, dt)`.

**Функции из `engine/math.js` (доступны для использования в логике бота если вы подключаете модуль)**
- `clamp(x, a, b)` — ограничение числа в диапазоне [a, b].
- `v(x=0, y=0)` — создать вектор `{x,y}`.
- `add(a,b)` — векторное сложение `{x,y}`.
- `sub(a,b)` — векторное вычитание `{x,y}`.
- `mul(a,k)` — умножение вектора на скаляр.
- `dot(a,b)` — скалярное произведение.
- `len(a)` — длина (модуль) вектора.
- `norm(a)` — нормализация вектора (единичный вектор).
- `rot(angle)` — создать единичный вектор направления `{ x: cos(angle), y: sin(angle) }`.
- `circleRectResolve(pos, radius, rect)` — проверяет и разрешает пересечение круга (машины) с оси-выравненным прямоугольником `rect` (`{x,y,w,h}`), возвращает `{ pos, hit, n }` где `pos` — поправленная позиция, `n` — нормаль столкновения.
- `reflect(vel, n, bounciness=0.2)` — отражает вектор скорости от нормали `n` с коэффициентом отскока.
- `lcg(seed)` — генератор псевдо-случайных чисел (линейный конгруэнтный генератор), возвращает функцию `() => [0..1)`.
- `rayCircle(o, d, c, r, maxDist)` — проверка пересечения луча (origin `o`, direction `d` unit vector) с кругом центра `c` и радиуса `r`. Возвращает расстояние `t` до пересечения либо `null`.
- `rayRect(o, d, r, maxDist)` — проверка пересечения луча с axis-aligned прямоугольником `r` (`{x,y,w,h}`). Возвращает `t` либо `null`.

Примечание: в рантайме боты обычно не импортируют весь `engine` — бот получает вход (`input`) от движка. Но если ваша среда сборки позволяет, вы можете импортировать нужные утилиты из `../engine/math.js`.

**Что должна экспортировать логика бота**
- Главная функция должна называться `decide` и принимать один аргумент: `input`.
- Сигнатура: `function decide(input) { /* ... */ return action; }`.
- Возвращаемый объект `action` должен иметь форму:
```js
{
  throttle: number, // -1 .. 1
  steer: number,    // -1 .. 1
  shoot: boolean,
  aimAngle: number, // угол в радианах (в глобальных координатах; обычно: me.ang + relative)
}
```
- `aimAngle` — ожидается как абсолютный/мировой угол направления стрельбы (в текущей реализации `rot(action.aimAngle)` используется как вектор направления).

**Пример minimal-экспорта бота (файл `bots/myBot.js`)**
```js
// Простой шаблон модуля-бота
export function decide(input) {
  // input — объект, описанный выше
  return { throttle: 0, steer: 0, shoot: false, aimAngle: input.me.ang };
}
```

**Импорты (пример)**
- Если вы хотите воспользоваться математикой, можно импортировать:
```js
import { len, sub, rot, norm, dot } from '../engine/math.js';
```

**Формат координат в output**
- `aimAngle` — угол в тех же мировых координатах/системе, что и `me.ang` (радианы, 0 вправо, y вниз).
- `throttle` и `steer` — нормированные скаляры; движок масштабирует их в ускорения/повороты согласно внутренним константам.

---
Файл составлен как справочник для создания бота: перечисляет входные поля, их смысл и единицы измерения, доступные утилиты и что именно должна возвращать функция `decide`.